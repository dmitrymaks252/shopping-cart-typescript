(this["webpackJsonpshoping-cart-ts"]=this["webpackJsonpshoping-cart-ts"]||[]).push([[0],{16:function(e,t,a){e.exports={CartItemCard:"CartItem_CartItemCard__2OqIF",quantity:"CartItem_quantity__3aAut",decrementBtn:"CartItem_decrementBtn__1fK3j",incrementBtn:"CartItem_incrementBtn__2S1LB",description:"CartItem_description__3ocUL",removeBtn:"CartItem_removeBtn__3vtAi"}},20:function(e,t,a){e.exports={form:"AddNewItemForm_form__1AFSz",requiredInput:"AddNewItemForm_requiredInput__3fybh",addNewProductBtn:"AddNewItemForm_addNewProductBtn__W9ekZ"}},24:function(e,t,a){e.exports={header:"ShoppingCartPage_header__XGoRd",loading:"ShoppingCartPage_loading__XeC7k",mainPart:"ShoppingCartPage_mainPart__3baCo",totalAndForm:"ShoppingCartPage_totalAndForm__3Ugg-"}},33:function(e,t,a){e.exports={summary:"SummaryBlock_summary__2eygP",checkoutBtn:"SummaryBlock_checkoutBtn__2Wkl_"}},44:function(e,t,a){e.exports={emptyCart:"Cart_emptyCart__15dei"}},45:function(e,t,a){e.exports={inputField:"Input_inputField__3nwtZ"}},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var r,n=a(0),c=a.n(n),i=a(27),s=a.n(i),o=a(46),d=a(4),u=a(17),l=a(19),j=a(47),m=a(42),O=a(8),b=a(7);!function(e){e.LOAD_PRODUCTS="LOAD_PRODUCTS",e.LOAD_PRODUCTS_SUCCESS="LOAD_PRODUCTS_SUCCESS",e.LOAD_PRODUCTS_FAILURE="LOAD_PRODUCTS_FAILURE",e.CHANGE_QUANTITY="CHANGE_QUANTITY",e.REMOVE_PRODUCT="REMOVE_PRODUCT",e.ADD_PRODUCT="ADD_PRODUCT"}(r||(r={}));var p={data:[],isLoading:!1,error:null};var _=a(6),h=a.n(_),x=a(43),C=a.n(x),y=a(21),f=function(e){return{type:r.LOAD_PRODUCTS_FAILURE,payload:e}},g=function(e){return{type:r.CHANGE_QUANTITY,payload:e}},v=h.a.mark(S),D=h.a.mark(U),A=h.a.mark(N);function S(){var e,t;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(y.b)(C.a,"https://my-json-server.typicode.com/dmitrymaks252/dmitrymaks252/products");case 3:return e=a.sent,t=e.data,a.next=7,Object(y.c)((n=t,{type:r.LOAD_PRODUCTS_SUCCESS,payload:n}));case 7:a.next=15;break;case 9:if(a.prev=9,a.t0=a.catch(0),window.alert(a.t0),!(a.t0 instanceof Error)){a.next=15;break}return a.next=15,Object(y.c)(f(a.t0.message));case 15:case"end":return a.stop()}var n}),v,null,[[0,9]])}function U(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.d)(r.LOAD_PRODUCTS,S);case 2:case"end":return e.stop()}}),D)}function N(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([U()]);case 2:case"end":return e.stop()}}),A)}var P=Object(j.a)(),T=Object(l.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.LOAD_PRODUCTS:return Object(b.a)(Object(b.a)({},e),{},{isLoading:!0});case r.LOAD_PRODUCTS_SUCCESS:return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,data:t.payload});case r.LOAD_PRODUCTS_FAILURE:return Object(b.a)(Object(b.a)({},e),{},{isLoading:!1,error:t.payload});case r.CHANGE_QUANTITY:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.map((function(e){return e.id===t.payload.id?Object(b.a)(Object(b.a)({},e),{},{quantity:e.quantity+t.payload.quantityChanger}):e}))});case r.REMOVE_PRODUCT:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload.id}))});case r.ADD_PRODUCT:var a=Object(b.a)(Object(b.a)({},t.payload),{},{id:Math.random(),imgUrl:"https://grassrootscha.com/wp-content/uploads/2018/11/shutterstock_161251868-1.jpg"});return Object(b.a)(Object(b.a)({},e),{},{data:[a].concat(Object(O.a)(e.data))});default:return e}}),Object(m.composeWithDevTools)(Object(l.applyMiddleware)(P)));P.run(N);var R=T,I=a(48),L=function(e){return e.data},q=function(e){return e.isLoading},E=Object(I.a)(L,(function(e){return e.reduce((function(e,t){return e+t.price*t.quantity}),0)})),k=a(33),w=a.n(k),F=a(2),B=function(){var e=Object(u.c)(E);return Object(F.jsxs)("div",{className:w.a.summary,children:[Object(F.jsx)("h3",{children:"Total price:"}),Object(F.jsxs)("p",{children:["$",e.toFixed(2)]}),Object(F.jsx)("button",{disabled:0===e,className:w.a.checkoutBtn,children:"Proceed to Checkout"})]})},M=function(){return Object(u.b)()},G=u.c,H=a(16),Q=a.n(H),V=function(e){var t=e.item,a=M();return t?Object(F.jsxs)("div",{className:Q.a.CartItemCard,children:[Object(F.jsx)("img",{src:t.imgUrl,alt:t.name}),Object(F.jsxs)("div",{className:Q.a.description,children:[Object(F.jsx)("h3",{title:"name",className:Q.a.HeaderTitle,children:t.name}),Object(F.jsxs)("p",{children:["Price: $",t.price.toFixed(2)," "]}),Object(F.jsxs)("p",{children:["Subtotal: $",(t.price*t.quantity).toFixed(2)]}),Object(F.jsx)("button",{className:Q.a.removeBtn,onClick:function(){var e;a((e={id:t.id},{type:r.REMOVE_PRODUCT,payload:e}))},title:"remove",children:"Remove"})]}),Object(F.jsxs)("div",{className:Q.a.quantity,children:[Object(F.jsx)("button",{className:Q.a.decrementBtn,disabled:1===t.quantity,onClick:function(){a(g({id:t.id,quantityChanger:-1}))},title:"decrement",children:"-"}),Object(F.jsx)("p",{title:"quantity",children:t.quantity}),Object(F.jsx)("button",{className:Q.a.incrementBtn,onClick:function(){a(g({id:t.id,quantityChanger:1}))},title:"increment",children:"+"})]})]}):null},Y=a(44),W=a.n(Y),$=function(){var e=G(L);return Object(F.jsx)(F.Fragment,{children:0===e.length?Object(F.jsx)("h2",{className:W.a.emptyCart,children:"Cart is empty, please add items"}):Object(F.jsx)("div",{children:e.map((function(e){return Object(F.jsx)(V,{item:e},e.id)}))})})},z=a(23),J=a(29),X=a(45),Z=a.n(X),K=function(e){var t=e.label,a=e.type,r=e.register,n={value:!0,message:"Field is required"},c={required:n,min:{value:1,message:"".concat(t," cannot be below zero")},max:{value:1e6,message:"Max valid is one million"},valueAsNumber:!0},i={required:n};return Object(F.jsx)("input",Object(b.a)({className:Z.a.inputField,placeholder:t,type:a},r(t,"number"===a?c:i)))},ee=a(20),te=a.n(ee),ae=function(){var e=M(),t=Object(z.b)(),a=t.register,n=t.reset,c=t.handleSubmit,i=t.formState.errors;return Object(F.jsxs)("form",{className:te.a.form,onSubmit:c((function(t){var a;e((a=t,{type:r.ADD_PRODUCT,payload:a})),n()})),children:[Object(F.jsxs)("label",{children:["Name:",Object(F.jsx)(K,{label:"name",type:"string",register:a}),Object(F.jsx)(J.a,{errors:i,name:"name",as:Object(F.jsx)("p",{className:te.a.requiredInput})})]}),Object(F.jsxs)("label",{children:["Price:",Object(F.jsx)(K,{type:"number",label:"price",register:a}),Object(F.jsx)(J.a,{errors:i,name:"price",as:Object(F.jsx)("p",{className:te.a.requiredInput})})]}),Object(F.jsxs)("label",{children:["Quantity:",Object(F.jsx)(K,{type:"number",label:"quantity",register:a}),Object(F.jsx)(J.a,{errors:i,name:"quantity",as:Object(F.jsx)("p",{className:te.a.requiredInput})})]}),Object(F.jsx)("button",{className:te.a.addNewProductBtn,children:"Add new item"})]})},re=a(24),ne=a.n(re),ce=function(){var e=M(),t=G(q);return Object(n.useEffect)((function(){return e({type:r.LOAD_PRODUCTS})}),[e]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("h1",{className:ne.a.header,children:"Shopping cart"}),t?Object(F.jsx)("h2",{className:ne.a.loading,children:"Loading..."}):Object(F.jsxs)("div",{className:ne.a.mainPart,children:[Object(F.jsx)($,{}),Object(F.jsxs)("div",{className:ne.a.totalAndForm,children:[Object(F.jsx)(B,{}),Object(F.jsx)(ae,{})]})]})]})},ie=function(){return Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(u.a,{store:R,children:Object(F.jsx)(o.a,{children:Object(F.jsx)(d.c,{children:Object(F.jsx)(d.a,{path:"/shopping-cart-typescript",element:Object(F.jsx)(ce,{})})})})})})};a(77);s.a.render(Object(F.jsx)(ie,{}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.6197ccc9.chunk.js.map